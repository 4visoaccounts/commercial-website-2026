{# ========================================================================== #}
{# :: Variables #}
{# ========================================================================== #}
{% set hideMenu = hideMenu is defined ? hideMenu : false %}
{% set links = header.commonLinks.all() ?? [] %}

{# ========================================================================== #}
{# Header Index #}
{# ========================================================================== #}
<header class="absolute top-0 left-0 w-full z-50" x-data="{ open: false }">
    <div class="container mx-auto px-4 lg:px-8">
        <nav class="flex items-center justify-between py-6 animate-fade-down">
            {# Logo #}
            <a href="/" class="no-underline">
                {% include "/logos/logo.twig" with { customClass: 'h-12'} %}
            </a>

            {# Desktop navigation #}
            {% if not hideMenu and links|length %}
                <div class="hidden md:flex items-center gap-8">
                    {% for item in links %}
                        {% set link = item.commonLink ?? null %}
                        {% if link %}
                            {% if loop.last %}
                                {% include 'components/button' with {
                                    href: link.url ?? '#',
                                    text: link.text ?? '',
                                    variant: 'white',
                                } %}
                            {% else %}
                                <a href="{{ link.url ?? '#' }}" class="text-white no-underline text-[18px] font-medium hover:text-peach transition-colors">
                                    {{ link.text }}
                                </a>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}

            {# Mobile hamburger #}
            <button @click="open = !open" class="md:hidden text-white" aria-label="Toggle menu">
                <i data-lucide="menu" class="w-6 h-6"></i>
            </button>
        </nav>
    </div>

    {# Mobile navigation â€” full screen overlay #}
    {% if not hideMenu and links|length %}
        <div x-show="open" x-cloak
            x-transition:enter="transition ease-out duration-300"
            x-transition:enter-start="opacity-0"
            x-transition:enter-end="opacity-100"
            x-transition:leave="transition ease-in duration-200"
            x-transition:leave-start="opacity-100"
            x-transition:leave-end="opacity-0"
            class="fixed inset-0 z-50 bg-primary md:hidden flex flex-col">

            {# Top bar with logo + close #}
            <div class="container mx-auto px-4 lg:px-8">
                <div class="flex items-center justify-between py-6">
                    <a href="/" class="no-underline">
                        {% include "/logos/logo.twig" with { customClass: 'h-12'} %}
                    </a>
                    <button @click="open = false" class="text-white" aria-label="Close menu">
                        <i data-lucide="x" class="w-6 h-6"></i>
                    </button>
                </div>
            </div>

            {# Centered links #}
            <div class="flex-1 flex flex-col items-center justify-center gap-10">
                {% for item in links %}
                    {% set link = item.commonLink ?? null %}
                    {% if link %}
                        {% if loop.last %}
                            {% include 'components/button' with {
                                href: link.url ?? '#',
                                text: link.text ?? '',
                                variant: 'white',
                            } %}
                        {% else %}
                            <a href="{{ link.url ?? '#' }}" @click="open = false"
                               class="text-white no-underline text-[28px] font-medium hover:text-peach transition-colors">
                                {{ link.text }}
                            </a>
                        {% endif %}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    {% endif %}
</header>
