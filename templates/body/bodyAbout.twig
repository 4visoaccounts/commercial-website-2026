{# ========================================================================== #}
{# :: Variables #}
{# ========================================================================== #}
{% set id = data.commonId ?? "" %}
{% set title = data.commonTitle ?? "" %}
{% set description = data.commonDescription ?? "" %}
{% set link = data.commonLink ?? null %}
{% set teammembers = data.commonTeammembers.all() ?? [] %}

{# ========================================================================== #}
{# :: Component #}
{# ========================================================================== #}
<section x-data="{ visible: false }" x-intersect.once="visible = true" class="py-16 md:py-32 bg-no-repeat relative" style="background-image: url('/assets/gradient.png'); background-size: 200% 100%; background-position: center;" id="{{id}}">
    {# Repeating logo pattern #}
    <div class="absolute inset-0 overflow-hidden pointer-events-none opacity-10 flex flex-wrap content-start gap-8 p-6">
        {% for i in 1..2000 %}
            {% include "/shapes/logo.twig" with { customClass: 'w-2 h-2 shrink-0' } %}
        {% endfor %}
    </div>
    <div class="container mx-auto px-4 lg:px-8 relative">
        {# Top: title left, description right #}
        {% if title or description or link %}
            <div class="flex flex-col md:flex-row gap-12 mb-20"
                style="opacity: 0; transform: translateY(24px);"
                :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s ease-out, transform 0.7s ease-out;`">
                {% if title %}
                    <div class="w-full md:w-1/3">
                        <h2 class="text-peach text-6xl">{{ title|striptags|raw }}</h2>
                    </div>
                {% endif %}

                <div class="w-full md:w-2/3 space-y-6">
                    {% if description %}
                        <p class="text-white text-xl leading-[1.7]">{{ description|striptags('<strong><br><br/>')|raw }}</p>
                    {% endif %}

                    {% if link %}
                        <a href="{{ link.url ?? '#' }}" class="inline-block no-underline" target="_blank" rel="noopener">
                            <i data-lucide="linkedin" class="w-6 h-6 text-white"></i>
                        </a>
                    {% endif %}
                </div>
            </div>
        {% endif %}

        {# Team members grid #}
        {% if teammembers|length %}
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6"
                style="opacity: 0; transform: translateY(24px);"
                :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s 150ms ease-out, transform 0.7s 150ms ease-out;`">
                {% for member in teammembers %}
                    {% set photo = member.commonAsset.one() ?? null %}
                    {% set memberLink = member.commonLink ?? null %}

                    <div class="relative rounded overflow-hidden aspect-[300/350]{% if photo %} bg-cover bg-center{% endif %}"{% if photo %} style="background-image: url('{{ photo.getUrl({ width: 600, format: 'webp', quality: 80 }) }}')"{% endif %}>

                        {# Gradient overlay #}
                        <div class="absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-black/70 to-transparent"></div>

                        {# Text overlay #}
                        <div class="absolute bottom-0 left-0 p-6">
                            <div class="flex items-center gap-1">
                                <span class="text-white font-bold text-[18px]">{{ member.commonTitle|striptags }}</span>
                                {% if memberLink %}
                                    <a href="{{ memberLink.url ?? '#' }}" class="no-underline" target="_blank" rel="noopener">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 15 15" fill="none">
                                            <g clip-path="url(#clip0_92_4438)">
                                            <path fill-rule="evenodd" clip-rule="evenodd" d="M0.625 1.77375C0.625 1.46908 0.746029 1.1769 0.961461 0.961463C1.17689 0.74603 1.46908 0.625002 1.77375 0.625002H13.225C13.376 0.624755 13.5255 0.654291 13.6651 0.711918C13.8046 0.769546 13.9315 0.854133 14.0383 0.960837C14.1451 1.06754 14.2298 1.19427 14.2876 1.33376C14.3454 1.47325 14.3751 1.62277 14.375 1.77375V13.225C14.3752 13.376 14.3456 13.5256 14.2879 13.6651C14.2302 13.8047 14.1455 13.9315 14.0388 14.0383C13.932 14.1451 13.8052 14.2298 13.6657 14.2876C13.5262 14.3454 13.3766 14.3751 13.2256 14.375H1.77375C1.62284 14.375 1.47341 14.3453 1.334 14.2875C1.19458 14.2297 1.06792 14.1451 0.96124 14.0383C0.854561 13.9316 0.769957 13.8049 0.712264 13.6654C0.654571 13.526 0.624918 13.3765 0.625 13.2256V1.77375ZM6.0675 5.8675H7.92938V6.8025C8.19813 6.265 8.88563 5.78125 9.91875 5.78125C11.8994 5.78125 12.3688 6.85188 12.3688 8.81625V12.455H10.3644V9.26375C10.3644 8.145 10.0956 7.51375 9.41313 7.51375C8.46625 7.51375 8.0725 8.19438 8.0725 9.26375V12.455H6.0675V5.8675ZM2.63 12.3694H4.635V5.78125H2.63V12.3694ZM4.92188 3.6325C4.92566 3.80417 4.89511 3.97487 4.83203 4.13457C4.76894 4.29428 4.6746 4.43977 4.55452 4.56252C4.43445 4.68527 4.29106 4.7828 4.13278 4.84938C3.97451 4.91596 3.80453 4.95026 3.63281 4.95026C3.4611 4.95026 3.29112 4.91596 3.13284 4.84938C2.97456 4.7828 2.83118 4.68527 2.71111 4.56252C2.59103 4.43977 2.49668 4.29428 2.4336 4.13457C2.37052 3.97487 2.33997 3.80417 2.34375 3.6325C2.35117 3.29554 2.49024 2.97487 2.73118 2.73918C2.97212 2.50349 3.29577 2.37151 3.63281 2.37151C3.96986 2.37151 4.29351 2.50349 4.53445 2.73918C4.77538 2.97487 4.91446 3.29554 4.92188 3.6325Z" fill="#B7E5BA"/>
                                            </g>
                                            <defs>
                                            <clipPath id="clip0_92_4438">
                                            <rect width="15" height="15" fill="white"/>
                                            </clipPath>
                                            </defs>
                                        </svg>
                                    </a>
                                {% endif %}
                            </div>
                            {% if member.commonDescription ?? null %}
                                <p class="text-white text-sm mt-1">{{ member.commonDescription|striptags|raw }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</section>
