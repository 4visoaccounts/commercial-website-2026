{# ========================================================================== #}
{# :: Variables #}
{# ========================================================================== #}
{% set id = data.commonId ?? "" %}
{% set title = data.commonTitle ?? "" %}
{% set description = data.commonDescription ?? "" %}
{% set link = data.commonLink ?? null %}

{# ========================================================================== #}
{# :: Component #}
{# ========================================================================== #}
<section x-data="{ visible: false }" x-intersect.once="visible = true" class="container mx-auto px-4 lg:px-8 py-16 md:py-32" id="{{id}}">
    <div class="flex flex-col md:flex-row gap-12 md:gap-20 items-start">
        {# Left side: title, description, email #}
        <div class="w-full md:w-1/3 md:pt-8"
            style="opacity: 0; transform: translateY(24px);"
            :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s ease-out, transform 0.7s ease-out;`">
            {% if title %}
                <h2 class="mb-6">{{ title|striptags|raw }}</h2>
            {% endif %}

            {% if description %}
                <h5 class="mb-8">{{ description|striptags }}</h5>
            {% endif %}

            {% if link %}
                <div class="flex items-center gap-3">
                    <i data-lucide="mail" class="w-5 h-5 text-primary-pine"></i>
                    <span class="text-dark text-[18px]">{{link.text }} <a href="mailto:{{link.url }}" class="text-primary-pine font-semibold">{{ link.url }}</a></span>
                </div>
            {% endif %}
        </div>

        {# Right side: contact form #}
        <div class="w-full md:w-2/3"
            style="opacity: 0; transform: translateY(24px);"
            :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s 150ms ease-out, transform 0.7s 150ms ease-out;`">
            <div class="relative">
                <div class="flex gap-6 flex-col absolute -top-[40px] -right-[40px] -z-10">
                    {% for i in 1..6 %}
                        <div class="flex gap-6">
                            {% for i in 1..6 %}
                                {% include "/shapes/logo.twig" with { customClass: 'w-3 h-3 shrink-0' } %}
                            {% endfor %}
                        </div>
                    {% endfor %}
                </div>
                <div class="bg-peach-light rounded p-8 md:p-12" >
                    <form method="post" accept-charset="UTF-8" class="relative space-y-6">
                        {{ csrfInput() }}
                        {{ actionInput('contact-form/send') }}
                        {{ redirectInput(craft.app.request.url ~ '?success=1') }}

                        {# Honeypot #}
                        <div style="position: absolute; left: -9999px;">
                            <label for="beesknees">Leave this empty</label>
                            <input type="text" name="beesknees" id="beesknees" value="">
                        </div>

                        <div>
                            <label for="firstName" class="block text-dark text-[16px] mb-2 no-underline">First Name<span class="text-primary">*</span></label>
                            <input type="text" name="message[firstName]" id="firstName" required class="w-full px-4 py-3 rounded bg-white text-dark text-[16px] focus:outline-none focus:border-primary">
                        </div>

                        <div>
                            <label for="lastName" class="block text-dark text-[16px] mb-2 no-underline">Last Name<span class="text-primary">*</span></label>
                            <input type="text" name="message[lastName]" id="lastName" required class="w-full px-4 py-3 rounded bg-white text-dark text-[16px] focus:outline-none focus:border-primary">
                        </div>

                        <div>
                            <label for="fromEmail" class="block text-dark text-[16px] mb-2 no-underline">Email Address<span class="text-primary">*</span></label>
                            <input type="email" name="fromEmail" id="fromEmail" required class="w-full px-4 py-3 rounded bg-white text-dark text-[16px] focus:outline-none focus:border-primary">
                        </div>

                        <div>
                            <label for="phone" class="block text-dark text-[16px] mb-2 no-underline">Phone Number<span class="text-primary">*</span></label>
                            <input type="tel" name="message[phone]" id="phone" required class="w-full px-4 py-3 rounded bg-white text-dark text-[16px] focus:outline-none focus:border-primary">
                        </div>

                        <div class="flex items-start gap-3">
                            <input type="checkbox" name="message[agree]" id="agree" required class="mt-1.5 w-4 h-4 accent-primary-pine">
                            <label for="agree" class="text-dark text-[14px] no-underline cursor-pointer">I agree with 4VISO's <a href="/terms" class="text-primary-pine font-semibold">terms of agreement</a>.</label>
                        </div>

                        <div>
                            <button type="submit" class="inline-flex items-center gap-2 px-6 py-3 rounded font-semibold text-[16px] no-underline transition bg-primary-pine text-white hover:bg-primary cursor-pointer">
                                Submit
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>
