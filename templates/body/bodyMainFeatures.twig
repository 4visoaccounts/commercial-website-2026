{# ========================================================================== #}
{# :: Variables #}
{# ========================================================================== #}
{% set title = data.commonTitle ?? "" %}
{% set description = data.commonDescription ?? "" %}
{% set features = data.commonFeatures.all() ?? [] %}

{# ========================================================================== #}
{# :: Component #}
{# ========================================================================== #}
<section class="bg-primary py-16 md:py-32">
    <div class="container mx-auto px-4 lg:px-8">
        {% if title or description %}
            <div class="text-center mb-16 max-w-3xl mx-auto">
                {% if title %}
                    <h2 class="text-white mb-4">{{ title|striptags|raw }}</h2>
                {% endif %}
                {% if description %}
                    <h5 class="text-white">{{ description|striptags }}</h5>
                {% endif %}
            </div>
        {% endif %}

        {% if features|length %}
            <div x-data="{ active: 0 }" class="flex flex-col md:flex-row gap-12 items-center">
                {# Left side: clickable features #}
                <div class="w-full md:w-1/2">
                    <div class="border-t border-white/40">
                        {% for feature in features %}
                            <div
                                @click="active = {{ loop.index0 }}"
                                class="cursor-pointer p-6 transition-all border-b border-white/40"
                                :class="active === {{ loop.index0 }} ? 'bg-white/10' : 'hover:bg-white/5'"
                            >
                                <div class="flex items-center gap-3">
                                    {% if feature.commonIcon ?? null %}
                                        <i class="ph ph-{{ feature.commonIcon }} text-primary-lightest-green text-2xl"></i>
                                    {% endif %}
                                    <h4 class="text-white !text-[20px]">{{ feature.commonTitle|striptags }}</h4>
                                </div>

                                <div x-show="active === {{ loop.index0 }}">
                                    {% if feature.commonDescription ?? null %}
                                        <p class="text-white/70 mt-4 !text-[16px]">{{ feature.commonDescription|striptags }}</p>
                                    {% endif %}
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>

                {# Right side: feature image #}
                <div class="w-full md:w-1/2">
                    {% for feature in features %}
                        {% set image = feature.commonAsset.one() ?? null %}
                        {% if image %}
                            <div x-show="active === {{ loop.index0 }}" x-transition:enter="transition ease-out duration-300" x-transition:enter-start="opacity-0" x-transition:enter-end="opacity-100">
                                <img src="{{ image.url }}" alt="{{ feature.commonTitle|striptags }}" class="w-full rounded" />
                            </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        {% endif %}
    </div>
</section>
