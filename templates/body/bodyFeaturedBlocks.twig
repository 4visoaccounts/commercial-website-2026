{# ========================================================================== #}
{# :: Variables #}
{# ========================================================================== #}
{% set id = data.commonId ?? "" %}
{% set title = data.commonTitle ?? "" %}
{% set description = data.commonDescription ?? "" %}
{% set blocks = data.commonBlocks.all() ?? [] %}

{# ========================================================================== #}
{# :: Component #}
{# ========================================================================== #}
<section x-data="{ visible: false }" x-intersect.once="visible = true" class="bg-primary relative overflow-hidden" id="{{id}}">
    <div class="container mx-auto px-4 lg:px-8 py-16 md:py-32 relative">
        {% if title %}
            <h2 class="text-white text-center mb-4"
                style="opacity: 0; transform: translateY(24px);"
                :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s ease-out, transform 0.7s ease-out;`">{{ title|striptags|raw }}</h2>
        {% endif %}

        {% if description %}
            <p class="text-white text-center max-w-3xl mx-auto mb-12"
                style="opacity: 0; transform: translateY(24px);"
                :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s 100ms ease-out, transform 0.7s 100ms ease-out;`">{{ description|striptags }}</p>
        {% endif %}

        {% if blocks|length %}
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                {% for block in blocks %}
                    <div class="relative">

                        {% if loop.first or loop.last %}
                            {# Shapes #}
                            <div class="flex gap-6 flex-col absolute {% if loop.first %} -top-[40px] -left-[80px] {% else %} -bottom-[40px] -right-[80px] {% endif %}">
                                {% for i in 1..6 %}
                                    <div class="flex gap-6">
                                        {% for i in 1..6 %}
                                            {% include "/shapes/logo.twig" with { customClass: 'w-3 h-3 shrink-0', customColor: '#B7E5BA' } %}
                                        {% endfor %}
                                    </div>
                                {% endfor %}
                            </div>
                        {% endif %}

                        {# Card #}
                        <div class="bg-card-border rounded p-12"
                            style="opacity: 0; transform: translateY(24px);"
                            :style="`opacity: ${visible ? 1 : 0}; transform: translateY(${visible ? 0 : 24}px); transition: opacity 0.7s {{ loop.index * 100 }}ms ease-out, transform 0.7s {{ loop.index * 100 }}ms ease-out;`">
                            {% if block.commonIcon ?? null %}
                                <div class="flex items-center gap-3 mb-4">
                                    <i data-lucide="{{ block.commonIcon }}" class="w-6 h-6 text-primary-mint" stroke-width="2.5"></i>
                                    {% if block.commonTitle ?? null %}
                                        <h4 class="font-bold">{{ block.commonTitle|striptags|raw }}</h4>
                                    {% endif %}
                                </div>
                            {% elseif block.commonTitle ?? null %}
                                <h5 class="font-bold mb-4">{{ block.commonTitle|striptags|raw }}</h5>
                            {% endif %}

                            {% if block.commonDescription ?? null %}
                                <p class="">{{ block.commonDescription|striptags|raw }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>
</section>
